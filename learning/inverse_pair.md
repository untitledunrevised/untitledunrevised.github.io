# 逆序对

本文主要介绍逆序对的定义，和一些求解逆序对数量的方法。

## 定义

对于一个序列 $\left< a_n \right>$，一个 **逆序对** 是满足下列条件的二元组 $(i, j)$：

$$
\begin{aligned}
i &< j
\\
a_i &> a_j
\end{aligned}
$$

由上述定义可知，满足下列条件的二元组 $(i, j)$ 也是逆序对：

$$
\begin{aligned}
i &> j
\\
a_i &< a_j
\end{aligned}
$$

## 基于排序算法的求解逆序对数量的方法

逆序对与排序算法密切相关。具体地，排序算法所做的事情本质就是：通过重排序列 $\left< a_n \right>$ 的所有元素的位置，使得该序列的逆序对数量为 $0$。

注意，如果一个排序算法不是稳定的，则该算法很可能无法求解逆序对数量。

### 基于比较的排序算法求解逆序对数量

本节介绍一些基于比较的排序算法求解逆序对数量的方法。

#### 冒泡排序求解逆序对问题

根据冒泡排序的算法流程，对于一个序列 $\left< a_n \right>$，当找到了一个逆序对 $(i, i+1)$ 时，算法将交换元素 $a_i$ 和 $a_{i+1}$ 的位置。

在此基础上，每找到这样一个逆序对时，就统计一次。

冒泡排序结束后，统计出来的就是原序列的逆序对数量。

时间复杂度 $O(n^2)$。

#### 插入排序求解逆序对问题

根据插入排序的算法流程，对于一个序列 $\left< a_n \right>$，当找到了一个逆序对 $(i-1, i)$ 时，算法将交换元素 $a_{i-1}$ 和 $a_i$ 的位置。

在此基础上，每找到这样一个逆序对时，就统计一次。

插入排序结束后，统计出来的就是原序列的逆序对数量。

时间复杂度 $O(n^2)$。
